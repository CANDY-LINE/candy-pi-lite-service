# 履歴
* ?.?.?
    - GPS/GLONASSで取得したNMEA-0183形式の位置データを出力するシリアルポートのエイリアスを追加
    - `server_main.py`のPythonプロセスへのSIGUSR2(12)シグナルにて、`poff`で切断したPPP接続を再接続する機能を追加
    - server_main.pyでプロセス再起動を促すシグナルをSIGHUP(1)に変更
    - ppp接続の一時切断、再接続、状態確認を行うスクリプト(`connection_suspend.sh`、`connection_resume.sh`、`connection_status.sh`)を追加。これらは、コマンドライン`candy`から利用される
    - OS起動時に常にモバイルネットワークへの接続を行うかどうかを指定できる変数を追加（初期状態は、常に接続を行う）
    - OS起動時にモバイルネットワークへの接続に失敗した時に、常にモジュールのリセットを伴うリトライを行う動作を廃止（接続の再開は、コマンドライン`candy connection resume`で行う形となる）
* 4.0.2
    - NTP時刻調整を有効にしている場合は通信モジュールによる時刻調整をしないように変更
    - 網側の時刻調整は、時間差が1秒以上ある場合にのみ実施するように変更
* 4.0.1
    - `RESTART_SCHEDULE_CRON`パラメーターがローカルタイムゾーンを無視していた問題を修正
    - `RESTART_SCHEDULE_CRON`で次に再起動する予定時間を秒ではなく日時表示に変更
* 4.0.0
    - 固定IPを設定するネットワークインタフェースを指定できるように変更
    - 固定IPを適用するデフォルトのネットワークインタフェースに`usb0`を追加(`eth0`が存在しない時にのみ適用)
    - ASUS Tinker BoardのハードウェアWatchdogもインストール時に有効化できるように変更
    - Softbank IoT/M2M向けSIMカードの標準APNを追加
    - Vodafone Global Enterprise M2M SIMカードの標準APNを追加
    - docomo IoTスターターSIMカードのAPNを追加
* 3.1.0
    - Tinker OS v2.0.5から、標準で`RPi.GPIO`パッケージがプリインストールされたことによりボード種別判定が誤判定する問題（Tinker OS v2.0.5以降のみ影響）を修正
    - ローミングネットワークへの自動ネットワーク登録が4分〜5分程度かかる場合があるため、タイムアウトを延長
    - 自動ネットワーク登録を使用せず直接ネットワークを指定できるオプションを追加（ローミングSIMを利用かつネットワークオペレーターが固定である場合はより早く接続できるためこちらの使用を推奨）
* 3.0.1
    - 固定IP設定が機能しない問題を修正
* 3.0.0
    - IPv6対応ネットワークへの設定をAPNで指定できるように変更
      - IPv6またはIPv4/IPv6デュアルスタックを指定可能
      - IPv6のみDNSを指定可能（プライマリーDNS、セカンダリーDNS）
    - IIJmio タイプD（IPv4/v6・IPv6）、IIJモバイル/タイプI、タイプD（IPv4、IPv4/v6・IPv6）向けAPNを追加
    - アンインストール時に`ufw`のバックアップを削除できていない問題を修正
    - サービス起動時に`ufw`サービスが設定されている(`systemctl is-enabled ufw`が`enabled`である)にもかかわらず`ufw`が無効(`inactive`)である場合に、自動的に有効(`active`)にするように修正
    - Analog Devices SmartMesh IP™ Manager/Mote USBデバイス接続時に固定のパス`/dev/DC2274A-A.CLI`(Manager)、`/dev/DC2274A-A.API`(Manager)、`/dev/DC2274A-B.CLI`(Mote)、`/dev/DC2274A-B.API`(Mote)を使用できるudevルールファイルを追加
    - `logrotate`パッケージがインストールされていない場合にインストールするように変更（Tinker OS v2.0.4では標準でインストールされないため、ログファイルでディスクスペースを圧迫される問題への対処として実施。Raspbianでは標準でインストール済みであるため影響なし）
* 2.0.2
    - USBテザリング時やUSB OTGイーサネット接続使用時のネットワークインタフェース`usb0`に対して初期状態でinputを受け付けるように`ufw`の設定を変更
* 2.0.1
    - モバイルネットワーク接続中にLANケーブルを差し込んだ時、一部のケースでデフォルトルートの設定に失敗する問題を修正
* 2.0.0
    - 接続方法を変更し接続までの時間を改善
    - USBシリアル接続時とUARTシリアル接続時とをLED点滅パターンで識別できるように変更
    - シリアル接続方法を従来の「自動」のほか、UARTシリアル接続のみ、UARTシリアル接続のみを指定できるオプション`SERIAL_PORT_TYPE`を追加
* 1.8.3
    - アンインストール時にエラーが出る問題を修正
    - ASUS Tinker Board Sにおいて、機種判定がうまくいかない場合がある問題を修正
* 1.8.2
    - ASUS Tinker Board Sに正式対応(ただしTinker OS 2.0.4以降に限る)
* 1.8.1
    - ボード種類を指定しても無視される問題を修正（Raspberry Pi及びASUS Tinker Board利用者への影響はありません）
* 1.8.0
    - ASUS Tinker Board ~~/ASUS Tinker Board S~~ へ正式対応(ただしTinker OS 2.0.4以降に限る)
    - デフォルトルートをppp0に設定してそのまま固定する機能を無効にするオプションを追加
* 1.7.3
    - USB接続時に`candy`コマンドが動作しない問題を修正
    - USB接続時に、USBシリアルポートが選択されない場合がある問題を修正
    - EC21において、時刻調整がされない場合がある挙動への対処を追加
* 1.7.2
    - 不要なリポジトリー更新を避けることによりインストール処理の時間を短縮
* 1.7.1
    - オンラインインストール時に途中で失敗する問題を修正
* 1.7.0
    - APNの設定方法を変更
    - `/boot/apn`にファイルを配置することにより起動時にAPNを設定できる機能を追加
* 1.6.2
    - ハードウェアWatchdogを初期設定で有効化
    - インストールや設定を強制的に行うことができるオプションを追加（内部利用のオプションであるためご利用いただけません）
* 1.6.1
    - ufwの設定ファイルを用いて初期設定を行うことができるように変更
* 1.6.0
    - Raspberry PiのハードウェアWatchdogを有効にできるインストールオプションを追加(Raspbian Stretch のみ)
    - EnOcean USBゲートウェイ接続時に固定のパス`/dev/enocean`を使用できるudevルールファイルを追加
    - 3G/LTE接続中にEthernetケーブルを接続するとsyslogにエラーログが出る問題を修正
    - poffされた時に再び接続に行く場合がある問題を修正
* 1.5.1
    - シリアルUART接続においてモデムの初期化をより安定して行えるように修正
* 1.5.0
    - UTC利用時に時刻調整後の時刻がずれる問題を修正
    - PPP接続において`persistent`機能によって再接続できない事態が発生した時、サービス自体が再起動する機能を追加
    - ハードウェアリセット後にUSB接続したまま起動するとモデム初期化が行われない問題を修正
* 1.4.1
    - 時刻調整時にタイムゾーンの計算をしていない問題を修正
    - `CONFIGURE_STATIC_IP_ON_BOOT=1`の場合にのみインストールされる（デフォルトは`0`）ネットワークインタフェース「`eth-rpi`」に対するUFW許可ルールがない問題を修正（アンインストール時にはこのルールは削除されます）
    - Raspbian Stretchから有効になったsystemd-timesyncd.serviceへの対処を追加
    - PPP接続中は、IPv6 デフォルトルートを利用しないように修正
* 1.4.0
    - ラズパイ起動時に有線LANの固定IPを設定する機能を有効にするインストールオプション`CONFIGURE_STATIC_IP_ON_BOOT`を追加（デフォルトでは無効）
      - このオプションを有効にしてインストールすると、ラズパイ付属のEthernetに固定のインタフェース名`eth-rpi`を用意します
      - ネットワークインタフェース「`eth-rpi`」が有効にならない場合、この機能は動作しません
      - candy-pi-lite-serviceをアンインストールすると、固定のインタフェース名`eth-rpi`を定義するudevルールは削除されます
      - 詳細は、[利用ガイドの「有線LAN固定IP設定」]((https://candy-line.gitbooks.io/candy-pi-lite/content/configuration/ether-static-ip.html))をご覧ください
    - 3G/LTEモジュールへのdefault routeが存在しないとき、自動的に追加されない問題を修正

* 1.3.1
    - 3Gモデルでタイムアウトを長くとる方が接続確立が安定するためタイムアウトを延長

* 1.3.0
    - ASUS Tinker Boardでも動作できるように対応

* 1.2.1
    - インターネットインストール時にudevルールのインストールができていない問題を修正

* 1.2.0
    - インストール時に`ltepi2`サービスがインストールされているときはアンインストールしなければインストールを実施しないように変更
    - udevルールのインストールができていない問題を修正

* 1.1.1
    - PPP接続に`persist`を追加
    - PPP接続確認タイムアウト時間を延長
    - PPP接続切断時に全てのPPP接続をOFFするように変更

* 1.1.0
    - USBシリアル接続のサポートを改善
    - UC20の再接続処理を簡素化

* 1.0.0
    - 初版
