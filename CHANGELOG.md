# 履歴
* 8.0.3
    - 接続タイムアウトログメッセージの改良
    - 拡張機能ベータ版の修正（既存機能への影響なし）
* 8.0.2
    - syslogフォーマットにモジュール名`[candy-pi-lite]`を追加
    - 内部スクリプトの効率化
    - 拡張機能ベータ版の追加（既存機能への影響なし）
* 8.0.1
    - SPモードの設定ミスを修正
    - Python 3での動作時に接続エラーとなる問題を修正

* 8.0.0
    - SPモードAPNを追加
    - Linux Kernel 4.9より前のRaspbian OSサポートを削除（Kernel 4.8以前のRaspbianではRaspberry Piボードの認識をしなくなる）
    - Python 3を標準で使用するように変更（ただし、Python 2.7の環境しかない場合はPython 2.7で動作）
    - Node.jsのインストールバージョンをv12.16.3へ変更
    - インストール時にARM_ARCH=armv6lを指定するとARMv7 CPUボードでもARMv6用バイナリーのNode.jsをインストールするように変更
    - pip、libudev-dev、python-devインストールを廃止

* 7.1.1
    - 通信モジュールのボーレートが115.2Kでない場合にシリアルポートを見つけられない不具合を修正

* 7.1.0
    - `candy`コマンドの応答文字列からカラーエスケープを削除する環境変数設定`NO_COLOR=1`を追加
    - 利用していない状態ファイルを削除

* 7.0.3
    - apnファイル（またはapn.txtファイル）の内容に改行が含まれると正しくAPNが設定されない問題を修正
    - モバイル接続が終了するとWiFi APが消えたままの状態になる問題を修正

* 7.0.2
    - モデムの情報を正しく処理できない場合にエラーとして終了してしまう問題を修正

* 7.0.1
    - 旧バージョンのCANDY REDで利用しているバイナリーのリビルドが行われていない問題を修正

* 7.0.0
    - OMRON USB型環境センサー2JCIE-BU01用のudevルールを追加（`/dev/2JCIE-BU01`）
    - ASUS Tinker BoardにおけるArmbianへのインストールに対応(USB接続のみ利用可)
    - Node.jsのインストールバージョンをv10.15.3へ変更
      - 旧バージョンのCANDY REDで利用しているバイナリーのリビルドは再インストールにより自動で行う
      - 追加インストールしたノードが消えている場合は、手動でインストールが必要
      - CANDY RED以外で旧バージョンのモジュールを利用している場合は、手動で`npm rebuild`が必要となる

* 6.8.0
    - PPP切断(Modem hangup)から再接続までの時間を短縮
    - PPPの`persist`を廃止
    - PPP切断状況により再接続しない場合がある問題を修正

* 6.7.0
    - EC25新ファームウェアへの対応を追加
    - さくらセキュアモバイルコネクトのAPN（DOCOMO/KDDI/Softbank）を追加
    - `/boot/apn.txt`へ設定可能なAPN属性が`user`、`password`、`apn`のみとなっていた問題を修正
    - 既知の問題：ASUS TinkerOS v2.0.8以降ではUSB接続のみ利用可能です。GPIO接続は、シリアル送信に問題があるため利用できません。カーネルモジュールではなくカーネル自体の問題と思われるため、問題解消の目処は立っておりません。

* 6.6.2
    - Raspberry Pi Zeroにてインストール時に`Unsupported architecture`と出る問題を修正

* 6.6.1
    - 3G版でGNSSが使用できない問題を修正

* 6.6.0
    - 接続リトライの機能を改善
    - 3G版の接続が確立できない問題を修正

* 6.5.0
    - UQ mobile SIMカードのAPN`uqmobile.jp`を追加
    - CANDY REDインストール時のエラーを修正

* 6.4.0
    - `candy gnss start`コマンドに、QZSS（みちびき）を有効にするオプション（`-q`または`-a`）を追加しました
        - モジュールの仕様により、それぞれのオプションを使用時には、GLONASSと北斗、またはガリレオ、GLONASS、北斗も有効になります）
        - CANDY Pi Lite+シリーズのみQZSSを使用します。CANDY Pi Lite 3Gでは、QZSSを使用できません

* 6.3.0
    - `candy sim`コマンド、`candy network`コマンド、`candy modem`コマンドにて、`--suspend`および`--resume`オプションが利用可能になりました。これによりGPIO接続時に明示的に接続を停止する必要なく1つのコマンドで接続の一時停止と再接続を行うことが可能です
    - `candy network show`コマンドの結果に登録先の無線ネットワークの種類と周波数バンドを含めるようにしました
    - Node.jsのインストールバージョンをv8.15.0へ変更

* 6.2.0
    - ASUS Tinker Board向けTinker OS v2.0.7へ対応
    - Node.jsのインストールバージョンをv8.12.0へ変更
    - microSDカードを使用したAPN設定のためのファイル名として`/boot/apn`に加えて、`/boot/apn.txt`も許容するように変更
    - イプシムSIMカードのAPN名を`ipsim.net`へ変更（以前のAPN`4gn.jp`は削除されました）

* 6.1.0
    - イプシムSIMカードのAPN名を`ipsim.net`へ変更（以前のAPN`4gn.jp`は次のバージョンで削除されます）
    - ロケモバSIMカードのAPN`rokemoba`を追加

* 6.0.0
    - IPレベルでのモバイルネットワーク到達確認監視機能を追加（初期状態では無効）

* 5.2.0
    - ARMv7/v8搭載のボードでもnodejs.orgのバイナリーを使用してインストールするように変更
    - kernel moduleのインストール時に想定したカーネルバージョンではない場合は警告を出してkernel moduleをインストールしないように変更

* 5.1.0
    - IIJモバイル/タイプD 高速通信プラン向けAPNを追加
    - EnOceanポートの対応デバイスにUSB300Uなどを追加
    - 本ソフトウェアをアンインストールした時にSmartMeshポート定義を削除するように変更

* 5.0.1
    - インストーラー実行時に、CANDY REDがENOMEMでインストールされない問題を修正
    - SIMカードが存在しない時にもNTPを止めてモバイルネットワーク時刻調整を実行しようとする問題を修正

* 5.0.0
    - GNSS/GPSで取得したNMEA-0183形式の位置データを出力するシリアルポートのエイリアスを追加
    - `server_main.py`のPythonプロセスへのSIGUSR2(12)シグナルにて、`poff`で切断したPPP接続を再接続する機能を追加
    - server_main.pyでプロセス再起動を促すシグナルをSIGHUP(1)に変更
    - ppp接続の一時切断、再接続、状態確認を行うスクリプト(`connection_suspend.sh`、`connection_resume.sh`、`connection_status.sh`)を追加。これらは、コマンドライン`candy`から利用される
    - OS起動時に常にモバイルネットワークへの接続を行うかどうかを指定できる変数を追加（初期状態は、常に接続を行う）
    - OS起動時に常にGNSSを起動するかどうかを指定できる変数を追加（初期状態は、GNSSを起動しない）
    - OS起動時にモバイルネットワークへの接続に失敗した時に、常にモジュールのリセットを伴うリトライを行う動作を廃止（接続の再開は、コマンドライン`candy connection resume`で行う形となる）
    - イプシムSIMカードの標準APNを追加
    - IIJモバイルタイプIのIPv4向けAPNがIPv4専用の設定になっていない点を修正
* 4.0.2
    - NTP時刻調整を有効にしている場合は通信モジュールによる時刻調整をしないように変更
    - 網側の時刻調整は、時間差が1秒以上ある場合にのみ実施するように変更
* 4.0.1
    - `RESTART_SCHEDULE_CRON`パラメーターがローカルタイムゾーンを無視していた問題を修正
    - `RESTART_SCHEDULE_CRON`で次に再起動する予定時間を秒ではなく日時表示に変更
* 4.0.0
    - 固定IPを設定するネットワークインタフェースを指定できるように変更
    - 固定IPを適用するデフォルトのネットワークインタフェースに`usb0`を追加(`eth0`が存在しない時にのみ適用)
    - ASUS Tinker BoardのハードウェアWatchdogもインストール時に有効化できるように変更
    - Softbank IoT/M2M向けSIMカードの標準APNを追加
    - Vodafone Global Enterprise M2M SIMカードの標準APNを追加
    - docomo IoTスターターSIMカードのAPNを追加
* 3.1.0
    - Tinker OS v2.0.5から、標準で`RPi.GPIO`パッケージがプリインストールされたことによりボード種別判定が誤判定する問題（Tinker OS v2.0.5以降のみ影響）を修正
    - ローミングネットワークへの自動ネットワーク登録が4分〜5分程度かかる場合があるため、タイムアウトを延長
    - 自動ネットワーク登録を使用せず直接ネットワークを指定できるオプションを追加（ローミングSIMを利用かつネットワークオペレーターが固定である場合はより早く接続できるためこちらの使用を推奨）
* 3.0.1
    - 固定IP設定が機能しない問題を修正
* 3.0.0
    - IPv6対応ネットワークへの設定をAPNで指定できるように変更
      - IPv6またはIPv4/IPv6デュアルスタックを指定可能
      - IPv6のみDNSを指定可能（プライマリーDNS、セカンダリーDNS）
    - IIJmio タイプD（IPv4/v6・IPv6）、IIJモバイル/タイプI、タイプD（IPv4、IPv4/v6・IPv6）向けAPNを追加
    - アンインストール時に`ufw`のバックアップを削除できていない問題を修正
    - サービス起動時に`ufw`サービスが設定されている(`systemctl is-enabled ufw`が`enabled`である)にもかかわらず`ufw`が無効(`inactive`)である場合に、自動的に有効(`active`)にするように修正
    - Analog Devices SmartMesh IP™ Manager/Mote USBデバイス接続時に固定のパス`/dev/DC2274A-A.CLI`(Manager)、`/dev/DC2274A-A.API`(Manager)、`/dev/DC2274A-B.CLI`(Mote)、`/dev/DC2274A-B.API`(Mote)を使用できるudevルールファイルを追加
    - `logrotate`パッケージがインストールされていない場合にインストールするように変更（Tinker OS v2.0.4では標準でインストールされないため、ログファイルでディスクスペースを圧迫される問題への対処として実施。Raspbianでは標準でインストール済みであるため影響なし）
* 2.0.2
    - USBテザリング時やUSB OTGイーサネット接続使用時のネットワークインタフェース`usb0`に対して初期状態でinputを受け付けるように`ufw`の設定を変更
* 2.0.1
    - モバイルネットワーク接続中にLANケーブルを差し込んだ時、一部のケースでデフォルトルートの設定に失敗する問題を修正
* 2.0.0
    - 接続方法を変更し接続までの時間を改善
    - USBシリアル接続時とUARTシリアル接続時とをLED点滅パターンで識別できるように変更
    - シリアル接続方法を従来の「自動」のほか、UARTシリアル接続のみ、UARTシリアル接続のみを指定できるオプション`SERIAL_PORT_TYPE`を追加
* 1.8.3
    - アンインストール時にエラーが出る問題を修正
    - ASUS Tinker Board Sにおいて、機種判定がうまくいかない場合がある問題を修正
* 1.8.2
    - ASUS Tinker Board Sに正式対応(ただしTinker OS 2.0.4以降に限る)
* 1.8.1
    - ボード種類を指定しても無視される問題を修正（Raspberry Pi及びASUS Tinker Board利用者への影響はありません）
* 1.8.0
    - ASUS Tinker Board ~~/ASUS Tinker Board S~~ へ正式対応(ただしTinker OS 2.0.4以降に限る)
    - デフォルトルートをppp0に設定してそのまま固定する機能を無効にするオプションを追加
* 1.7.3
    - USB接続時に`candy`コマンドが動作しない問題を修正
    - USB接続時に、USBシリアルポートが選択されない場合がある問題を修正
    - EC21において、時刻調整がされない場合がある挙動への対処を追加
* 1.7.2
    - 不要なリポジトリー更新を避けることによりインストール処理の時間を短縮
* 1.7.1
    - オンラインインストール時に途中で失敗する問題を修正
* 1.7.0
    - APNの設定方法を変更
    - `/boot/apn`にファイルを配置することにより起動時にAPNを設定できる機能を追加
* 1.6.2
    - ハードウェアWatchdogを初期設定で有効化
    - インストールや設定を強制的に行うことができるオプションを追加（内部利用のオプションであるためご利用いただけません）
* 1.6.1
    - ufwの設定ファイルを用いて初期設定を行うことができるように変更
* 1.6.0
    - Raspberry PiのハードウェアWatchdogを有効にできるインストールオプションを追加(Raspbian Stretch のみ)
    - EnOcean USBゲートウェイ接続時に固定のパス`/dev/enocean`を使用できるudevルールファイルを追加
    - 3G/LTE接続中にEthernetケーブルを接続するとsyslogにエラーログが出る問題を修正
    - poffされた時に再び接続に行く場合がある問題を修正
* 1.5.1
    - シリアルUART接続においてモデムの初期化をより安定して行えるように修正
* 1.5.0
    - UTC利用時に時刻調整後の時刻がずれる問題を修正
    - PPP接続において`persistent`機能によって再接続できない事態が発生した時、サービス自体が再起動する機能を追加
    - ハードウェアリセット後にUSB接続したまま起動するとモデム初期化が行われない問題を修正
* 1.4.1
    - 時刻調整時にタイムゾーンの計算をしていない問題を修正
    - `CONFIGURE_STATIC_IP_ON_BOOT=1`の場合にのみインストールされる（デフォルトは`0`）ネットワークインタフェース「`eth-rpi`」に対するUFW許可ルールがない問題を修正（アンインストール時にはこのルールは削除されます）
    - Raspbian Stretchから有効になったsystemd-timesyncd.serviceへの対処を追加
    - PPP接続中は、IPv6 デフォルトルートを利用しないように修正
* 1.4.0
    - ラズパイ起動時に有線LANの固定IPを設定する機能を有効にするインストールオプション`CONFIGURE_STATIC_IP_ON_BOOT`を追加（デフォルトでは無効）
      - このオプションを有効にしてインストールすると、ラズパイ付属のEthernetに固定のインタフェース名`eth-rpi`を用意します
      - ネットワークインタフェース「`eth-rpi`」が有効にならない場合、この機能は動作しません
      - candy-pi-lite-serviceをアンインストールすると、固定のインタフェース名`eth-rpi`を定義するudevルールは削除されます
      - 詳細は、[利用ガイドの「有線LAN固定IP設定」]((https://candy-line.gitbooks.io/candy-pi-lite/content/configuration/ether-static-ip.html))をご覧ください
    - 3G/LTEモジュールへのdefault routeが存在しないとき、自動的に追加されない問題を修正

* 1.3.1
    - 3Gモデルでタイムアウトを長くとる方が接続確立が安定するためタイムアウトを延長

* 1.3.0
    - ASUS Tinker Boardでも動作できるように対応

* 1.2.1
    - インターネットインストール時にudevルールのインストールができていない問題を修正

* 1.2.0
    - インストール時に`ltepi2`サービスがインストールされているときはアンインストールしなければインストールを実施しないように変更
    - udevルールのインストールができていない問題を修正

* 1.1.1
    - PPP接続に`persist`を追加
    - PPP接続確認タイムアウト時間を延長
    - PPP接続切断時に全てのPPP接続をOFFするように変更

* 1.1.0
    - USBシリアル接続のサポートを改善
    - UC20の再接続処理を簡素化

* 1.0.0
    - 初版
